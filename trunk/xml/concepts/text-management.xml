<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect2 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
                       "http://www.docbook.org/xml/4.3/docbookx.dtd">
<!-- section history:
  2012-03-18 j.h: created
 -->
<!--2012-05-30-->
<sect1 id="gimp-text-management">
  <title lang="en">Text Management</title>
  <title lang="ja">文字入れ</title>

  <indexterm lang="en">
    <primary>Text</primary>
    <secondary>Editing text</secondary>
  </indexterm>
  <indexterm lang="ja">
    <primary sortas="モジ">文字</primary>
    <secondary sortas="テキストヲヘンシュウ">テキストを編集</secondary>
  </indexterm>

  <!--FOR TRANSLATORS: this file is a reshaping of the old
    concepts/fonts-and-text.xml file. A large part can be copy-pasted-->

  <para lang="en">
    Text is managed with the Text tool. This tool creates a new layer containing
    the text, above the current layer in the layer dialog, with the size of the
    text box. Its name is the beginning of the text.
  </para>
  <para lang="ja">
    文字 (テキスト) はテキストツールを使って操作します。 このツールは
    テキストを含む新しいレイヤーをつくり、 文字入れに使ったテキストボックスの
    大きさにし、 現在のレイヤーの上に置きます (上下関係はレイヤーダイアログで
    確認できる)。 入れた文の冒頭部分がレイヤーの名前になります。
  </para>

  <figure>
    <title lang="en">Example of a text item</title>
    <title lang="ja">テキスト品目の例</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/using/text-example.png" format="PNG"/>
      </imageobject>
      <caption>
        <para lang="en">
          Example of a text item, showing the boundary of the text layer.
          (Font: Utopia Bold)
        </para>
        <para lang="ja">
          テキスト品目の例、 テキストレイヤーの境界線が見えている。 (フォント名:
          Utopia Bold)
        </para>
      </caption>
    </mediaobject>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/using/text-example-2.png" format="PNG"/>
      </imageobject>
      <caption>
        <para lang="en">
          The layer dialog, with the text layer above the layer which was
          current.
        </para>
        <para lang="ja">
          レイヤーダイアログと、 現在のレイヤー上に重ねられたテキストレイヤー。
        </para>
      </caption>
    </mediaobject>
  </figure>

  <para lang="en">
    The Text tool is progressively improved. With <acronym>GIMP</acronym>-2.8,
    you can now edit text directly on canvas. A text tool box has been added
    which overlays the canvas above the text box.
  </para>
  <para lang="ja">
    テキストツールはどんどん進化しつづけています。 とうとう
    <application><acronym>GIMP</acronym>&nbsp;2.8</application> から
    直に画像上でテキストが編集できるようになりました。 新登場のテキスト
    ツールボックスにより、 画像上のその場で展開するテキストボックスの
    すぐ側 (上隣) でツールも操作できます。
  </para>

  <mediaobject>
    <imageobject>
      <imagedata fileref="images/using/text-toolbar.png" format="PNG"/>
    </imageobject>
    <caption>
      <para lang="en">
        As soon as you click on the canvas with the Text tool, you get a closed
        text box and a semi-transparent tool box just above.
      </para>
      <para lang="ja">
        テキストツールで画像をクリックするとただちに閉じたテキスト
        ボックスが半透明なツールボックスつきで現れる。
      </para>
    </caption>
  </mediaobject>

  <para lang="en">
    Text tool options are described in <xref linkend="gimp-tool-text"/>.
  </para>
  <para lang="ja">
    テキストツールのオプションについては
    <xref linkend="gimp-tool-text"/> で説明しています。
  </para>

  <para lang="en">
    The default box mode is <quote>Dynamic</quote>, and you can start typing
    text at once. The text box will enlarge gradually. Press
    <keycap>Enter</keycap> to add a new line.
  </para>
  <para lang="en">
    You can also <emphasis role="bold">enlarge the text box</emphasis> by
    click-and-dragging, as you do with selections. Note that box mode
    turns to "Fixed". You also have to press <keycap>Enter</keycap> to add
    a new line.
  </para>
  <para lang="en">
    To <emphasis role="bold">edit text</emphasis>, you must, first, select the
    part you want to edit by click-and-drag, or
    <keycombo><keycap>Shift</keycap><keycap>arrow key</keycap></keycombo> and
    then use the options of the <xref linkend="gimp-text-tool-box"/>.
  </para>
  <para lang="ja">
    ボックスモードは初期設定で<quote>流動的</quote>となっていて、 この場合は
    同時に文字入れを開始できます。 テキストボックスは文に合わせて[横に]
    拡大します。 <keycap>Enter</keycap> キーを押すと行が増えます。
  </para>
  <para lang="ja">
    テキストボックスはクリックで枠をつまんでドラッグで
    延ばせば選択範囲の操作のように <emphasis role="bold">拡大</emphasis> 
    できます。 ちなみにこのあと自動的にボックスモードが<quote>固定</quote>に
    切り替わります。 行を増やすにはやはり <keycap>Enter</keycap> キーを
    押さなくてはいけません。
  </para>
  <para lang="ja">
    入れてある文を編集するにはとにかくまず変更したい部分を選択しなくては
    いけません。 文を選択するには文字をクリックしてその部分のもう一方まで
    ドラッグする方法と、 同じく編集したい文の最初もしくは最後の文字で 
    <keycap>Shift</keycap> キーを押しながら <keycap>上</keycap>
    <keycap>下</keycap> <keycap>左</keycap> <keycap>右</keycap> 矢印キーで
    もう一方の文字までカーソルを動かす方法があります。 そのあと
    <xref linkend="gimp-text-tool-box"/> のオプションを使います。
  </para>

  <para lang="en">
    Instead of using the on-canvas text editing, you can use the 
    <xref linkend="gimp-text-editor-dialog"/>.
  </para>
  <para lang="ja">
    文字入れは画像上で直接編集する機能のほかに、 従来の
    <xref linkend="gimp-text-editor-dialog"/> も利用できます。
  </para>

  <para lang="en">
    You can <emphasis role="bold">move the text</emphasis> on the image using
    the Move tool: you must click on a character, not on the background.
  </para>
  <para lang="ja">
    画像に入れた文字は
    <xref linkend="gimp-tool-move"/> ツールで移動できます。 ただし文字
    そのものをクリックせず透過部分をクリックすると背景が動くので注意が要ります。
  </para>

  <para lang="en">
    You can get <emphasis role="bold">Unicode characters</emphasis> with
    <keycombo>
      <keycap>Ctrl</keycap><keycap>Shift</keycap><keycap>U</keycap>
    </keycombo>
    plus hexadecimal Unicode code of the desired char. Please see <xref
    linkend="gimp-text-editor-dialog"/>.
  </para>
  <para lang="ja">
    ユニコードによる文字入れも可能です。
    <keycombo>
      <keycap>Ctrl</keycap><keycap>Shift</keycap><keycap>U</keycap>
    </keycombo>
    で現れるコード入力ダイアログに 16 進数で綴ります。 詳しくは
    <xref linkend="gimp-text-editor-dialog"/> をご覧ください。
  </para>

  <para lang="en">
    You can <emphasis role="bold">edit the text later</emphasis>, if the text
    layer still exists and has not been modified by another tool (see below):
    make the text layer active in the<link linkend="gimp-layer-dialog">Layer
    dialog</link>, select the Text tool and click on the text in the image
    window.
  </para>
  <para lang="ja">
    既に作ったテキストレイヤーは (下記に示す) 他のツールで加工される前であれば
    後からでも編集できます。 そのテキストレイヤーを
    <link linkend="gimp-layer-dialog">レイヤーダイアログ</link> で選んで
    活性化させ、 テキストツールを呼び出し、 そのテキストレイヤーの文字を
    画像ウィンドウでクリックします。
  </para>

 <variablelist>
   <varlistentry>
     <term lang="en">Managing Text Layer</term>
     <term lang="ja">テキストレイヤーの管理運用</term>
     <listitem>
       <para lang="en">
         You can operate on a text layer in the same ways as any other layer,
         but doing so often means giving up the ability to edit the text
         without losing the results of your work.
        </para>
        <para lang="en">
          To understand some of the idiosyncrasies of text handling, it may help
          for you to realize that a text layer contains more information than
          the  pixel data that you see: it also contains a representation of the
          text in a text-editor format. You can see this in the text-editor
          window that pops  up while you are using the Text tool. Every time you
          alter the text, the image layer is redrawn to reflect your changes.
        </para>
        <para lang="en">
          Now suppose you create a text layer, and then operate on it in some
          way that does not involve the Text tool: rotate it, for example.
          Suppose you then come back and try to edit it using the Text tool. As
          soon as you  edit the text, the Text tool will redraw the layer,
          wiping out the results of the operations you performed in the
          meantime.
        </para>
        <para lang="en">
          Because this danger is not obvious, the Text tool tries to protect you
          from it. If you operate on a text layer, and then later try to edit
          the text, a message pops up, warning you that your alterations will be
          undone, and giving you three options:
        </para>
        <para lang="ja">
          テキストレイヤーは他のレイヤーと同じ要領で操作できますが、 操作に
          よってはその成果を失なわずにテキストを再編集する望みの無いことも
          覚悟せねばなりません。
        </para>
        <para lang="ja">
          テキストレイヤーには見たままの画素データだけではない情報が詰まって
          いることがわかると、 テキスト操作の特質を少しでも理解する助けになる
          かもしれません。 その情報とは、 テキストについてのテキストエディター
          形式による表現です。 テキストツールを使うときに現れるテキスト
          エディターウィンドウ内で見られます。 テキストを変更するたびに画像の
          レイヤー上でもその成果が反映されます。
        </para>
        <para lang="ja">
          テキストレイヤーを作成したあとで、 テキストツールを通さない操作 
          (例えば回転) をしたとします。 そのテキストをまたテキストツールで
          編集すると、 テキストツールはテキストレイヤーを再描画しますので、 
          それまでのこのレイヤーに対する操作の成果は破棄されることになります。
        </para>
        <para lang="ja">
          目立たない危険ですので、 テキストツールはそれに陥らないように
          はからいます。 操作してあるテキストレイヤーのテキストを再び
          編集しようとすると、 メッセージが現れ、 それまでの操作が取り消されて
          しまうことを警告し、 つぎの 3 つの選択肢を示します。 
        </para>
        <itemizedlist>
          <listitem>
            <para lang="en">edit the text anyway;</para>
            <para lang="ja">そのまま編集を続行</para>
          </listitem>
          <listitem>
            <para lang="en">cancel;</para>
            <para lang="ja">断念</para>
          </listitem>
          <listitem>
            <para lang="en">
              create a new text layer with the same text as the existing layer,
              leaving the existing layer unchanged.
            </para>
            <para lang="ja">
              そのテキストレイヤーはそのままに、 テキストや属性が同じ
              テキストレイヤーを新たに作成
            </para>
          </listitem>
        </itemizedlist>
        <figure>
          <title lang="en">Warning lose modifications</title>
          <title lang="ja">変更が失われることを警告</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/using/text-warning.png" format="PNG"/>
            </imageobject>
          </mediaobject>
        </figure>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Text Editing Context Menu</term>
      <term lang="ja">テキスト編集の脈絡メニュー</term>
      <listitem>
        <figure>
          <title lang="en">Text Editing Context Menu</title>
          <title lang="ja">テキスト編集の脈絡メニュー</title>
          <mediaobject>
            <imageobject>
              <imagedata format="PNG"
                fileref="images/toolbox/text-editing-context-menu.png"/>
            </imageobject>
          </mediaobject>
        </figure>

        <para lang="en">
          You get this menu by right-clicking on text. It is somewhat different
          from that of the Text Editor dialog.
        </para>
        <para lang="ja">
          このメニューは文字を <mousebutton>第2ボタン</mousebutton> で
          クリックすると出てきます。 テキストエディターダイアログのメニューとは
          いくぶんその構成が異なります。
        </para>
      
        <itemizedlist>
          <!--Options migrated from old text.xml-->
          <listitem>
            <para lang="en">
              <guilabel>Cut, Copy, Paste, Delete</guilabel>: these options
              concern a selected text. They remain grayed out as long as no text
              is selected. <quote>Paste</quote> is activated if the clipboard is
              full of text.
            </para>
            <para lang="ja">
              <guimenuitem>切り取り</guimenuitem>
              <guimenuitem>コピー</guimenuitem>
              <guimenuitem>貼り付け</guimenuitem>
              <guimenuitem>削除</guimenuitem>:
              これらのオプションは選択してある文字に作用します。
              選択されている文字がないときはいずれも灰色無効の表示になります。
              <guilabel>貼り付け</guilabel> はクリップボードの中身が文や語句の
              ときに利用できます。
            </para>
          </listitem>
          <listitem>
            <para lang="en">
              <guilabel>Open text file</guilabel>: this command opens a file
              browser where you can find the wanted text file.
            </para>
            <para lang="ja">
              <guimenuitem>テキストファイルを開く</guimenuitem>: このコマンドは
              ファイルブラウザーを開きますので目当てのファイルを探し
              出しましょう。
            </para>
          </listitem>
          <listitem>
            <para lang="en">
              <guilabel>Clear</guilabel>: this command deletes all the text,
              selected or not.
            </para>
            <para lang="ja">
              <guimenuitem>消去</guimenuitem>: このコマンドはそのレイヤー内の
              文字を選択のあるなしにかかわらず全部消去します。
            </para>
          </listitem>
          <listitem>
            <para id="text-to-path">
              <guilabel>Path from text</guilabel>: this command creates a
              path from the outlines of the current text. The result is not
              evident. You have to open the Path dialog and make path visible.
              Then select the Path tool and click on the text. Every letter
              is  now surrounded with a path component. So you can modify
              the shape of letters by moving path control points.
            </para>
            <para lang="en">
              This command is similar to
              <menuchoice>
                <guimenu>Layer</guimenu>
                <guisubmenu>Text to Path</guisubmenu>
              </menuchoice>.
            </para>
            <para lang="ja">
              <guimenuitem>テキストからパスを作成</guimenuitem>: このコマンドは
              現在のテキストの文字の輪郭をもとにパスを作成します。 しかしその
              結果はすぐには解りません。 キャンバスで表示するにはパスダイアログ
              を開いて、 できたパスを可視状態に切り替える必要があります。 
              そのあとパスツールを呼び出してから文字をクリックします。 すべての
              文字や記号がパス成分で囲まれている様子が見られます。 つまり
              このあとパスのコントロールポイントを操作すれば文字の形が
              加工できるのです。
            </para>
            <para lang="ja">
              このコマンドは画像ウィンドウのメニューの
              <menuchoice>
                <guimenu>レイヤー</guimenu>
                <guimenuitem>テキストをパスに</guimenuitem>
              </menuchoice>
              と同じものです。
            </para>
          </listitem>
          <listitem>
            <para id="text-along-path">
              <guilabel>Text along path</guilabel>:
              <indexterm>
                <primary>Text along Path</primary>
              </indexterm>
            </para>
            <para lang="en">
              This option is enabled only if a
              <link linkend="gimp-using-paths">path</link> exists. When your
              text is created, then create or import a path and make it active.
              If you create your path before the text, the path becomes
              invisible and you have to make it visible in the Path Dialog.
            </para>
            <para lang="en">
              This command is also available from the <quote>Layer</quote> menu:
            </para>
            <para lang="ja">
              <guilabel>テキストをパスに沿って変形</guilabel>:
              <indexterm>
                <primary sortas="テキストヲパスニソッテヘンケイ">
                  テキストをパスに沿って変形
                </primary>
              </indexterm>
            </para>
            <para lang="ja">
              このオプションは
              <link linkend="gimp-using-paths">パス</link> があるときだけ
              利用可能です。 文字を収めたテキストレイヤーを作ったら、 パスを
              作成するかもしくはインポートで生成してからそれを活性化します。
              もし既に作ったパスを利用する場合は不可視になっていることが多い
              のでパスダイアログで可視化します。
            </para>
            <para lang="ja">
              このコマンドも同じものが <guimenu>レイヤー</guimenu> メニューに
              あります。
            </para>
            <figure>
              <title lang="en">
                The Text along Path command among text commands in the Layer
                menu
              </title>
              <title lang="ja">
                <guimenuitem>パスに沿ってテキストを変形</guimenuitem> は
                レイヤーメニューのテキスト用コマンドのひとつ
              </title>
              <mediaobject>
                <imageobject>
                  <imagedata format="PNG"
                    fileref="images/menus/layer/text-commands.png"/>
                </imageobject>
                <caption>
                  <para lang="en">
                    This group of options appears only if a text layer exists.
                  </para>
                  <para lang="ja">
                    これらテキスト用コマンドの一群はテキストレイヤーが画像に
                    あるときだけ現れる。
                  </para>
                </caption>
              </mediaobject>
            </figure>

            <para lang="en">
              Click on the <guibutton>Text along Path</guibutton> button. The
              text is bent along the path. Letters are represented with their
              outline. Each of them is a component of the new path that
              appears in the <link linkend="gimp-path-dialog">Path
              dialog</link>. All path options should apply to this new path.
            </para>
            <para lang="ja">
              <guimenuitem>パスに沿ってテキストを変形</guimenuitem> コマンドを
              実行します。 するとテキストはパスに沿ってうねるように
              綴られます。 それぞれの文字は輪郭だけが描かれています。
              これらは新たなパスの成分になっていて、
              <link linkend="gimp-path-dialog">パスダイアログ</link> でも
              確認できます。 パスに適用できるオプションはすべてこのパスにも
              適用できます。
            </para>
            <figure>
              <title lang="en"><quote>Text along Path</quote> example</title>
              <title lang="ja">
                <quote>パスに沿ってテキストを変形</quote>の例
              </title>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="images/toolbox/text-along-path.png"
                  format="PNG"/>
                </imageobject>
              </mediaobject>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="images/toolbox/text-path.png"
                  format="PNG"/>
                </imageobject>
              </mediaobject>
            </figure>
          </listitem>
          <listitem>
            <para lang="en">
              <guilabel>From Left to Right / From Right to Left</guilabel>: fix
              the writing direction of your language.
            </para>
            <para lang="ja">
              左から右への書式<quote>LTR</quote>と右から左への書式
              <quote>RTL</quote>: 使う言語の文字綴り方向をここで指定します。
            </para>
          </listitem>
          <listitem>
            <para id="gimp-input-methods">
              <guilabel>Input Methods</guilabel>: methods are available for some
              languages. For example, selecting <quote>Inuktitut</quote>
              transforms your keyboard into an Inuktitut keyboard, temporarily.
            </para>
            <para lang="ja">
              <guisubmenu>入力方法</guisubmenu>: いくつかの言語は入力メソッドが
              選べます。 例えば <guimenuitem>イヌクティトゥト
              (翻字)</guimenuitem> を選ぶと一時的にキーボードが
              イヌクティトゥト言語用に替わります。
            </para>
          </listitem>
        </itemizedlist>
      </listitem>
    </varlistentry>
  </variablelist>
</sect1>
