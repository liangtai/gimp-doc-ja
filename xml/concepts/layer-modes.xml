<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
                       "http://www.docbook.org/xml/4.3/docbookx.dtd">
<!--Section History
  2009-02-21 j.h: revised for v2.6
  2008-04-06 Mr.Dust : reviewed and added 'ko'
  2008-01-05 jpl: added example to 'dissolve'
  2007-09-23 AntI: Added 'es'
  2007-07-14 bug fixed in Color Erase
  2007-04-29 Dust : added "ko"
  2007-02-15 ciampix: added "it"
  2007-02-13 KoSt: added 'no'
  2007-01-19 lexA: moved en over from the glossary
  2007-01-13 lexA: relocated from the layer dialog and added
                   examples and equations
  2006-09-06 scb: thorough review and/or rewrite of English
-->
<!--2009-06-23-->
<sect1 id="gimp-concepts-layer-modes">
  <title lang="en">Layer Modes</title>
  <title lang="ja">レイヤーのモード</title>

  <indexterm lang="en">
    <primary>Layer</primary>
    <secondary>Modes</secondary>
  </indexterm>
  <indexterm lang="en">
    <primary>Modes of layers</primary>
  </indexterm>
  <indexterm lang="en">
    <primary>Color</primary>
    <secondary>Merging layer Modes</secondary>
  </indexterm>
  <indexterm lang="ja">
    <primary>レイヤー</primary>
    <secondary>モード</secondary>
  </indexterm>
  <indexterm lang="ja">
    <primary sortas="レイヤーノモード">レイヤーのモード</primary>
  </indexterm>
  <indexterm lang="ja">
    <primary sortas="イロ">色</primary>
    <secondary sortas="レイヤーモードヲトウゴウ">
      レイヤーモードを統合
    </secondary>
  </indexterm>

  <para lang="en">
    <acronym>GIMP</acronym> has twenty-one layer modes. Layer modes are also
    sometimes called <quote>blending modes</quote>.
    Selecting a layer mode changes the appearance of the layer or image,
    based on the layer or layers beneath it. If there is only one layer, the
    layer mode has no effect. There must therefore be at least two layers in
    the image to be able to use layer modes.
  </para>
  <para lang="en">
    You can set the layer mode in the <guilabel>Mode</guilabel>
    menu in the Layers dialog. <acronym>GIMP</acronym>
    uses the layer mode to determine how to combine each pixel in the top
    layer with the pixel in the same location in the layer below it.
  </para>
  <para lang="ja">
    <acronym>GIMP</acronym>のレイヤーモードは21種類あります。 レイヤーモードは
    <quote>ブレンドのモード</quote>と呼ばれることもあります。 レイヤーモードを
    選ぶと、 対象レイヤーもしくはその背面側のレイヤーを下敷に、 そのレイヤーや
    画像が視覚的に変化します。 画像にレイヤーが1層しかないときはレイヤーモード
    を変えても何も起きません。 すなわちレイヤーモードを利用するには画像に少なく
    とも2層以上のレイヤーがなくてはなりません。
  </para>
  <para lang="ja">
    レイヤーモードはレイヤーダイアログの <guilabel>モード</guilabel> メニューで
    選びます。 レイヤーモードとは対象レイヤーの画素とその背面側のレイヤーの同じ
    位置の画素との合成方法を定めるものです。
  </para>
  <note>
    <para lang="en">
      There is a drop-down list in the Toolbox options box which contains
      modes that affect the painting tools in a similar way to the layer
      modes. You can use all of the same modes for painting that are available
      for layers, and there are two additional modes just for the painting
      tools. See <xref linkend="gimp-tool-painting"/>.
    </para>
    <para lang="ja">
      描画ツールのうち鉛筆、 絵筆、 エアブラシ、 インク、 スタンプの各ツール
      には描画モードがあり、 レイヤーモードと共通のはたらきをする21種類のモード
      と描画モード特有の2種類のモードがあります。
      <link linkend="gimp-tool-painting">描画ツール特有のモード</link>
      をご覧ください。
    </para>
  </note>
  <para lang="en">
    Layer modes permit complex color changes in the image. They are often used
    with a new layer which acts as a kind of mask. For example, if you put a
    solid white layer over an image and set the layer mode of the new layer to
    <quote>Saturation</quote>, the underlying visible layers will appear in
    shades of gray.
  </para>
  <para lang="ja">
    レイヤーモードによっては画像に複雑な色の変化をもたらします。 そのような
    モードはある種のマスクとして作用させる目的で、 新しいレイヤーを用いて使用
    することがよく行われます。 例えば新たに単色白のレイヤーを画像の前面に重ね、
    そのモードを<quote>彩度</quote>に設定すると、 その下側の可視レイヤーは
    灰色の陰影だけが見え、 まるで白黒写真のようになります。
  </para>

  <figure>
    <title lang="en">Images (masks) for layer mode examples</title>
    <title lang="ja">レイヤーモードの例に用いる画像 (マスク用)</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/using/layer-mode-mask1.jpg" format="JPG"/>
      </imageobject>
      <caption>
        <para lang="en">Mask 1</para>
        <para lang="ja">マスク 1</para>
      </caption>
    </mediaobject>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/using/layer-mode-mask2.jpg" format="JPG"/>
      </imageobject>
      <caption>
        <para lang="en">Mask 2</para>
        <para lang="ja">マスク 2</para>
      </caption>
    </mediaobject>
  </figure>
  <figure>
    <title lang="en">Images (backgrounds) for layer mode examples</title>
    <title lang="ja">レイヤーモードの例に用いる画像 (背景用)</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/using/keyfob_orig.png" format="PNG"/>
      </imageobject>
      <caption>
        <para lang="en">Key fob</para>
        <para lang="ja">キーホルダアクセサリ</para>
      </caption>
    </mediaobject>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/using/duck_orig.png" format="PNG"/>
      </imageobject>
      <caption>
        <para lang="en">Ducks</para>
        <para lang="ja">かも</para>
      </caption>
    </mediaobject>
  </figure>

  <para lang="en">
    In the descriptions of the layer modes below, the equations are also
    shown. This is for those who are curious about the mathematics of the
    layer modes. You do not need to understand the equations in order to use
    the layer modes effectively, however.
  </para>
  <para lang="en">
    The equations are in a shorthand notation. For example, the equation
  </para>
  <para lang="ja">
    以下のレイヤーモードの説明には数式も登場します。 これはレイヤーモードを
    数理的に理解したい方のためのものです。 もちろんレイヤーモードの効果を利用
    するのが目的ならばそれらの数式を理解する必要はありません。
  </para>
  <para lang="ja">
    数式には略号を使っています。 例えば次の等式
  </para>
  <equation>
    <title lang="en">Example</title>
    <title lang="ja">略号の例</title>
    <alt role="latex">$$E = M + I$$</alt>
    <graphic fileref="images/math/layer-mode-example.png" format="PNG"/>
  </equation>
  <para lang="en">
    means,
    <quote>
      For each pixel in the upper (<emphasis>M</emphasis>ask)and lower
      (<emphasis>I</emphasis>mage) layer, add each of the
      corresponding color components together to form the
      <emphasis>E</emphasis> resulting pixel's color.
    </quote>
    Pixel color components must always be between 0 and 255. Unless the
    description below says otherwise, a negative color component is set to 0
    and a color component larger than 255 is set to 255.
  </para>
  <para lang="en">
    The examples below show the effects of each of the modes.
  </para>
  <para lang="en">
    Since the results of each mode vary greatly depending upon the colors on
    the layers, these images can only give you a general idea of how the modes
    work. You are encouraged to try them out yourself. You might start with
    two similar layers, where one is a copy of the other, but slightly
    modified (by being blurred, moved, rotated, scaled, color-inverted, etc.)
    and seeing what happens with the layer modes.
  </para>
  <para lang="ja">
    の意味は、 <quote>ある画素の色 <emphasis>E</emphasis> は、 上に重ねたマスク
    のその位置の画素の色 <emphasis>M</emphasis> に、 同じ位置の下側にある
    レイヤーの画素の色 <emphasis>I</emphasis> を加えたものである</quote>です。
    画素の色はその値が 0 から 255 の範囲に常に入らなければなりません。 ですから
    特に断わりのない限り、 計算で負の値が出れば 0 に直され、 255 を越えれば 255
    になります。
  </para>
  <para lang="ja">
    例図はそれぞれのモードによる効果を表しています。
  </para>
  <para lang="ja">
    各モードの成果はレイヤーの色に非常に大きく左右されるため、 例図の画像から
    ではモードの効能はごく一般的な感触しか掴めません。 まずはご自分で確かめ
    られることをお勧めします。 試しに何かの画像にその複製レイヤーを重ねて、
    片方だけちょっと変化 (ぼかし、 移動、 回転、 拡大・縮小、 色反転など)
    させておいてから、
    レイヤーモードを変更するとどんなことが起きるかを見比べるのです。
  </para>
  <variablelist>
    <varlistentry>
      <term lang="en">Normal</term>
      <term lang="ja">標準</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Normal</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ヒョウジュン">標準</secondary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Normal</quote></title>
          <title lang="ja">レイヤーモード<quote>標準</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-normal-50.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Both images are blended into each other with the same
                intensity.
              </para>
              <para lang="ja">
                両画像を等しい強度で互いに融合させた。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-normal-100.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                With 100% opacity only the upper layer is shown when blending
                with <quote>Normal</quote>.
              </para>
              <para lang="ja">
                <quote>標準</quote>合成の場合、 上のレイヤーが不透明度100%
                ならば重なった部分は上のレイヤーだけが見える。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Normal</guilabel>
          mode is the default layer mode. The layer on top covers the layers
          below it. If you want to see anything below the top layer when you
          use this mode, the layer must have some transparent areas.
        </para>
        <para lang="ja">
          <guimenuitem>標準</guimenuitem> モードは既定のレイヤーモードです。
          上のレイヤーがその下側のレイヤーを覆い隠します。 このモードで下側の
          レイヤーが何か見えるようにするには上のレイヤーに透過部分がなくては
          なりません。
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Normal</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>標準</quote>の等式</title>
          <alt role="latex">$$E = M$$</alt>
          <graphic fileref="images/math/layer-mode-normal.png" format="PNG"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Dissolve</term>
      <term lang="ja">ディザ合成</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Dissolve</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Dissolve</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ディザゴウセイ">ディザ合成</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ディザゴウセイ">ディザ合成</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Dissolve</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>ディザ合成</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-dissolve-50.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Both images are blended into each
                other with the same
                intensity.
              </para>
              <para lang="ja">
                両画像を等しい強度で互いに融合させた。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG" fileref="images/using/layer-mode-dissolve-100.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                With 100% opacity only the upper layer is shown when blending
                with <quote>dissolve</quote>.
              </para>
              <para lang="ja">
                <quote>ディザ合成</quote>の場合、 上のレイヤーが不透明度100%
                ならば重なった部分は上のレイヤーだけが見える。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Dissolve</guilabel>
          mode dissolves the upper layer into the layer beneath it by drawing
          a random pattern of pixels in areas of partial transparency. It is
          useful as a layer mode, but it is also often useful as a painting
          mode.
        </para>
        <para lang="en">
          This is especially visible along the edges within an image. It is
          easiest to see in an enlarged screenshot. The image on the left
          illustrates <quote>Normal</quote> layer mode (enlarged) and the
          image on the right shows the same two layers in
          <quote>Dissolve</quote>
          mode, where it can be clearly seen how the pixels are dispersed.
        </para>
        <para lang="ja">
          <guimenuitem>ディザ合成</guimenuitem> は画素を無作為に透過させる
          ディザ効果を上側のレイヤーにかけてその下のレイヤーと合成します。
          この技法はレイヤーモードのみならず描画のモードでもたびたび
          役立ちます。
        </para>
        <para lang="ja">
          このモードは画像を重ねた縁の付近で特にその特徴が顕著に現れます。 拡大
          したスクリーンショットをご覧になればもっとわかりやすいでしょう。 
          下図の左の[上の]画像は<quote>標準</quote>レイヤーモードを、 右の
          [下の]画像は<quote>ディザ合成</quote>レイヤーモードを使った同じ
          部分を抜き出したものですが、 画素の散乱の様子がはっきりわかります。
        </para>
        <figure>
          <title lang="en">Enlarged screenshots</title>
          <title lang="ja">スクリーンショットの拡大図</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-dissolve-nbig.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">Normal mode.</para>
              <para lang="ja">標準モード</para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-dissolve-dbig.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">Dissolve mode.</para>
              <para lang="ja">ディザ合成モード</para>
            </caption>
          </mediaobject>
        </figure>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Multiply</term>
      <term lang="ja">乗算</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Multiply</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Multiply</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ジョウサン">乗算</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ジョウサン">乗算</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Multiply</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>乗算</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-multiply-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-multiply-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Multiply</guilabel>
          mode multiplies the pixel values of the upper layer with those of
          the layer below it and then divides the result by 255. The result is
          usually a darker image. If either layer is white, the resulting
          image is the same as the other layer (1 * I = I). If either layer
          is black, the resulting image is completely black (0 * I = 0).
        </para>
        <para lang="ja">
          <guimenuitem>乗算</guimenuitem> モードは上側のレイヤーの画素の値と
          その下側のレイヤーの画素の値の積を255で除算します。 結果として画像が
          暗くなる場合がほとんどです。 どちらかのレイヤーに純白があればその部分
          はもう一方のレイヤーの色と同じになります (1 * I = I)。 どちらかの
          レイヤーに黒があればその部分は完全な黒になります (0 * I = 0)。
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Multiply</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>乗算</quote>の等式</title>
          <alt role="latex">$$E = \frac {1}{255} (M * I)$$</alt>
          <graphic fileref="images/math/layer-mode-multiply.png" format="PNG"/>
        </equation>
        <para lang="en">
          The mode is commutative; the order of the two layers doesn't matter.
        </para>
        <para lang="ja">
          このモードは可換です。 両レイヤーの順序を問いません。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Divide</term>
      <term lang="ja">除算</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Divide</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Divide</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ジョサン">除算</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ジョサン">除算</primary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Divide</quote></title>
          <title lang="ja">レイヤーモード<quote>除算</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-divide-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-divide-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Divide</guilabel>
          mode multiplies each pixel value in the lower layer by 256 and then
          divides that by the corresponding pixel value of the upper layer
          plus one. (Adding one to the denominator avoids dividing by zero.)
          The resulting image is often lighter, and sometimes looks
          <quote>burned out</quote>.
        <para lang="en">The equation is:</para>
        </para>
        <para lang="ja">
          <guimenuitem>除算</guimenuitem> モードは下側のレイヤーの画素の値を
          256倍したあとで上側のレイヤーの同じ位置の画素の値に1を加えた値で
          除算します。 (1を加えるのは0で除算するのを避けるためです。 その結果、
          ほとんどの画像は色が薄くなり、 ときには<quote>日焼け</quote>した
          ようにも見えます。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Divide</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>除算</quote>の等式</title>
          <alt role="latex">$$E = 256 \frac {I}{M + 1}$$</alt>
          <graphic fileref="images/math/layer-mode-divide.png" format="JPG"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Screen</term>
      <term lang="ja">スクリーン</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Screen</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Screen</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary>スクリーン</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary>スクリーン</primary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Screen</quote></title>
          <title lang="ja">レイヤーモード<quote>スクリーン</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-screen-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-screen-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Screen</guilabel>
          mode inverts the values of each of the visible pixels in the two
          layers of the image. (That is, it subtracts each of them from 255.)
          Then it multiplies them together, divides by 255 and inverts
          this value again. The resulting image is usually brighter, and
          sometimes <quote>washed out</quote>
          in appearance. The exceptions to this are a black layer, which does
          not change the other layer, and a white layer, which results in a
          white image. Darker colors in the image appear to be more
          transparent.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>スクリーン</guimenuitem> モードはまず画像の両レイヤーの
          可視画素の値を反転します。 (つまり各値は255との差に置き換わります。)
          次に両値の積を255で除算した値を再び反転します。 その結果、 ほとんどの
          画像は明るくなり、 ときには<quote>洗い晒し</quote>たようにも見えます。
          このモードの例外は、 レイヤーが黒い場合にもう一方のレイヤーの色から
          何も変化しないことと、 レイヤーが白い場合には画像が白くなることです。
          画像の色は暗いところほど透明になります。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Screen</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>スクリーン</quote>の等式</title>
          <alt role="latex">
        $$E = 255 - \frac {(255-M)*(255-I)}{255}$$
          </alt>
          <graphic fileref="images/math/layer-mode-screen.png"/>
        </equation>
        <para lang="en">
          The mode is commutative; the order of the two layers doesn't matter.
        </para>
        <para lang="ja">
          このモードは可換です。 両レイヤーの順序を問いません。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry id="layer-mode-overlay">
      <term lang="en">Overlay</term>
      <term lang="ja">オーバーレイ</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Overlay</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Overlay</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary>オーバーレイ</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary>オーバーレイ</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Overlay</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>オーバーレイ</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-overlay-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-overlay-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Overlay</guilabel>
          mode inverts the pixel value of the lower layer, multiplies it by
          two times the pixel value of the upper layer, adds that to the
          original pixel value of the lower layer, divides by 255, and then
          multiplies by the pixel value of the original lower layer and
          divides by 255 again. It darkens the image, but not as much as with
          <quote>Multiply</quote> mode.
        </para>
        <para lang="ja">
          <guimenuitem>オーバーレイ</guimenuitem> モードは下側のレイヤーの画素
          の値を反転し、 上側のレイヤーの同じ位置の画素の値との積を2倍して255で
          割り、 その値と下側のレイヤーの画素の元の値との和にさらに下側の
          レイヤーの画素の元の値をかけて、 再び255で割ります。 画像は暗く
          なりますが<quote>乗算</quote>モードほどの変化はありません。
        </para>
        <para>
          <title lang="en">The equation is:</title>
          <title lang="ja">等式はつぎのとおり:</title>
          <footnote id="gimp-layer-mode-bug162395">
            <para lang="en">
              The equation is the *theoretical* equation. Due to
              <ulink url="http://bugzilla.gnome.org/show_bug.cgi?id=162395">
              Bug #162395 </ulink>, the actual equation is equivalent to Soft
              light. It is difficult to fix this bug without changing the
              appearance of existing images.
            </para>
            <para lang="ja">
              これは 理 論 上 の等式です。
              <ulink url="http://bugzilla.gnome.org/show_bug.cgi?id=162395">
              Bug #162395</ulink> の報告にもあるように、 実際に使われている数式
              は<quote>ソフトライト</quote>と全く同じものです。 このバグへの
              対処については[このモードの削除やあるいは別の数式に変更するような
              処置が]既にファイルに保存してある画像の見た目を変更してしまう
              おそれがあるので、 困難です。
            </para>
          </footnote>
        </para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Overlay</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>オーバーレイ</quote>の等式
          </title>
          <alt role="latex">
        $$E = \frac{1I}{255} * (I+ \frac{2M}{255} * (255 - I))$$
          </alt>
          <graphic fileref="images/math/layer-mode-overlay.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Dodge</term>
      <term lang="ja">覆い焼き</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Dodge</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Dodge</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="オオイヤキ">覆い焼き</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="オオイヤキ">覆い焼き</primary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Dodge</quote></title>
          <title lang="ja">レイヤーモード<quote>覆い焼き</quote>の例</title>
          </title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-dodge-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-dodge-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Dodge</guilabel>
          mode multiplies the pixel value of the lower layer by 256, then
          divides that by the inverse of the pixel value of the top layer. The
          resulting image is usually lighter, but some colors may be inverted.
        </para>
        <para lang="en">
          In photography, dodging is a technique used in a darkroom to
          decrease the exposure in particular areas of the image. This brings
          out details in the shadows. When used for this purpose, dodge may
          work best on Grayscale images and with a painting tool, rather than
          as a layer mode.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>覆い焼き</guimenuitem> モードは下側のレイヤーの画素の
          値を256倍してから、 上側のレイヤーの同じ位置の画素の値を反転してから
          1を加えた値により商を求めます。 その結果、 画像は通常色が薄くなり、
          一部の色は反転します。
        </para>
        <para lang="ja">
          写真の業界では覆い焼きとは暗室での現像作業で画像の特定の部分の露出を
          抑える技法をさしています。 結果として影になっていた部分が詳しく見える
          ようになります。 この本来の目的で覆い焼きモードを使うのならば、
          レイヤーモードよりむしろ描画ツールでグレイスケール画像に対しての
          操作で真価を発揮します。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">Equation for layer mode <quote>Dodge</quote></title>
          <title lang="ja">レイヤーモード<quote>覆い焼き</quote>の等式</title>
          <alt role="latex">$$E = \frac{I*256}{(255-M)+1}$$</alt>
          <graphic fileref="images/math/layer-mode-dodge.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Burn</term>
      <term lang="ja">焼き込み</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Burn</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Burn</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ヤキコミ">焼き込み</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ヤキコミ">焼き込み</primary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Burn</quote></title>
          <title lang="ja">レイヤーモード<quote>焼き込み</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-burn-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-burn-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Burn</guilabel>
          mode inverts the pixel value of the lower layer, multiplies it by
          256, divides that by one plus the pixel value of the upper layer,
          then inverts the result. It tends to make the image darker, somewhat
          similar to <quote>Multiply</quote> mode.
        </para>
        <para lang="en">
          In photography, burning is a technique used in a darkroom to
          increase the exposure in particular areas of the image. This brings
          out details in the highlights. When used for this purpose, burn may
          work best on Grayscale images and with a painting tool, rather than
          as a layer mode.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>焼き込み</guimenuitem> モードは下側のレイヤーの画素の
          値を反転して256倍し、 上側のレイヤーの同じ位置の画素の値に1を加えた
          値で除算し、 反転します。 結果として画像は暗くなる傾向があり、
          いくぶん<quote>乗算</quote>モードに似ています。
        </para>
        <para lang="ja">
          写真の業界では焼き込みとは暗室での現像作業で画像の特定の部分の露出を
          強める技法をさしています。 結果として眩しくなっていた部分が詳しく
          見えるようになります。 この本来の目的で焼き込みモードを使うのならば、
          レイヤーモードよりむしろ描画ツールでグレイスケール画像に対しての
          操作で真価を発揮します。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">Equation for layer mode <quote>Burn</quote></title>
          <title lang="ja">レイヤーモード<quote>焼き込み</quote>の等式</title>
          <alt role="latex">$$E = 255 - \frac{(255-I)*256}{M+1}$$
          </alt>
          <graphic fileref="images/math/layer-mode-burn.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Hard light</term>
      <term lang="ja">ハードライト</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Hard light</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Hard light</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary>ハードライト</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary>ハードライト</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Hard light</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>ハードライト</quote>の例
          </title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-hard-light-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-hard-light-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Hard light</guilabel>
          mode is rather complicated because the equation consists of two
          parts, one for darker colors and one for brighter colors. If the
          pixel color of the upper layer is greater than 128, the layers are
          combined according to the first formula shown below. Otherwise, the
          pixel values of the upper and lower layers are multiplied together
          and multiplied by two, then divided by 256. You might use this mode
          to combine two photographs and obtain bright colors and sharp edges.
        </para>
        <para lang="en">The equation is complex and different according to
          the value &gt;128 or 128 :</para>
        <equation>
        <para lang="ja">
          <guimenuitem>ハードライト</guimenuitem> モードは明るい色用と暗い色用
          の2つの等式を扱うためちょっとややこしくなっています。 上側のレイヤー
          の画素の値が128を越えておれば、 下に示した第1の数式をレイヤーの
          合成処理に使います。 逆に上側のレイヤーの画素の値が128以下ならば、
          両レイヤーの画素の値の積を2倍して256で割ります。 2枚の写真を合成する
          ときこのモードを使えば色が明るくなり形象の輪郭がはっきりします。
        </para>
        <para lang="ja">
          この等式は上側のレイヤーの画素の値が128を越す場合と128以下である場合
          とで異なっています:
        </para>
          <title lang="en">
            Equation for layer mode <quote>Hard light</quote>, M &gt; 128
          </title>
          <title lang="ja">
            レイヤーモード<quote>ハードライト</quote>の等式、 M &gt; 128 の場合
          </title>
          <alt role="latex">
        $$M &gt; 128: E = 255- \frac{(255-I)*(255-(2*(M-128)))}{256}$$
          </alt>
          <graphic fileref="images/math/layer-mode-hard-light1.png"/>
        </equation>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Hard light</quote>, M  128
          </title>
          <title lang="ja">
            レイヤーモード<quote>ハードライト</quote>の等式、 M ≦ 128 の場合
          </title>
          <alt role="latex">
        $$M \leq 128: E = \frac{I*M*2}{256}$$
          </alt>
          <graphic fileref="images/math/layer-mode-hard-light2.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Soft light</term>
      <term lang="ja">ソフトライト</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Soft light</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Soft light</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary>ソフトライト</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary>ソフトライト</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Soft light</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>ソフトライト</quote>の例
          </title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-soft-light-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-soft-light-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Soft light</guilabel> is not related to
          <quote>Hard light</quote> in anything but the name, but it
          does tend to make the edges softer and the colors not so
          bright. It is similar to <quote>Overlay</quote> mode. In some
          versions of <acronym>GIMP</acronym>, <quote>Overlay</quote>
          mode and <quote>Soft light</quote> mode are identical.
        </para>
        <para lang="en">The equation is complicated. It needs Rs, the
          result of Screen mode :
        </para>
        <para lang="ja">
          <guimenuitem>ソフトライト</guimenuitem> モードは<quote>ハードライト
          </quote>モードに名前以外では何の関係もありませんが、 色はさほど明るく
          ならず、 形象の輪郭も柔らかくなる傾向にあります。 <quote>オーバーレイ
          </quote>モードに似ています。 <acronym>GIMP</acronym>では数版に
          わたって、 <quote>オーバーレイ</quote>モードと<quote>ソフトライト
          </quote>モードが同一の状態が続いています。
        </para>
        <para lang="ja">
          この等式は複雑です。 <quote>スクリーン</quote>モードの結果
          R<subscript>s</subscript> を使います:
        </para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Screen</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>スクリーン</quote>の等式
          </title>
          <alt role="latex">
          $$R_{s} = \frac {255-((255-I)*(255-M))}{256}$$
            </alt>
          <graphic fileref="images/math/layer-mode-soft-light1.png"/>
        </equation>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Soft light</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>ソフトライト</quote>の等式
          </title>
          <alt role="latex">
          $$E = \frac {((255-I)*M*I)+(I*R_{s})}{255}$$
            </alt>
          <graphic fileref="images/math/layer-mode-soft-light2.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Grain extract</term>
      <term lang="ja">微粒取り出し</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Grain extract</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Grain extract</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ビリュウトリダシ">微粒取り出し</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ビリュウトリダシ">微粒取り出し</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Grain extract</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>微粒取り出し</quote>の例
          </title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-grain-extract-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-grain-extract-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Grain extract</guilabel>
          mode is supposed to extract the <quote>film grain</quote>
          from a layer to produce a new layer that is pure grain, but it can
          also be useful for giving images an embossed appearance. It
          subtracts the pixel value of the upper layer from that of the lower
          layer and adds 128.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>微粒取り出し</guimenuitem> モードはレイヤーから<quote>
          フィルム粒子</quote>を抽出して純粒子からなる新たなレイヤーを生成する
          ことと想定<!--意味わからぬ-->できますが、 画像にエンボス加工を施した
          ようにする目的にも適います。 上側のレイヤーの画素の値を下側のレイヤー
          の同じ位置の画素の値から引き、 128を加えます。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Grain extract</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>微粒取り出し</quote>の等式
          </title>
          <alt role="latex">$$E = I - M + 128$$</alt>
          <graphic fileref="images/math/layer-mode-grainextract.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Grain merge</term>
      <term lang="ja">微粒結合</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Grain merge</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Grain merge</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ビリュウケツゴウ">微粒結合</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ビリュウケツゴウ">微粒結合</primary>
        </indexterm>
        <para lang="en">
          There are two more layer modes, but these are available only for
          painting tools. See
          <link linkend="gimp-tool-painting-modes">Painting Modes</link>
          for detailed information.
        </para>
        <para lang="ja">
          これ以外の2つのモードは描画ツール専用です。 詳しくは
          <link linkend="gimp-tool-painting-modes">描画モード</link>
          をご覧ください。
        </para>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Grain merge</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>微粒結合</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-grain-merge-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-grain-merge-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en">
          <guilabel>Grain merge</guilabel> mode merges a grain layer
          (possibly one created from the <quote>Grain extract</quote>
          mode) into the current layer, leaving a grainy version of the
          original layer. It does just the opposite of
          <quote>Grain extract</quote>. It adds the pixel values of the
          upper and lower layers together and subtracts 128.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>微粒結合</guimenuitem> モードは粒状レイヤー (おそらくは
          <quote>微粒取り出し</quote>モードで作成されたもの) を上側のレイヤーに
          融合させ元のレイヤーの粒状性は残します。 ちょうど<quote>微粒取り出し
          </quote>モードの逆です。 上下の両レイヤーの画素の値の和から128を
          除算します。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Grain merge</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>微粒結合</quote>の等式</title>
          <alt role="latex">$$E = I + M - 128$$</alt>
          <graphic fileref="images/math/layer-mode-grainmerge.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Difference</term>
      <term lang="ja">差の絶対値</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Difference</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Difference</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="サノゼッタイチ">差の絶対値</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="サノゼッタイチ">差の絶対値</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Difference</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>差の絶対値</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-difference-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-difference-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Difference</guilabel>
          mode subtracts the pixel value of the upper layer from that of the
          lower layer and then takes the absolute value of the result. No
          matter what the original two layers look like, the result looks
          rather odd. You can use it to invert elements of an image.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>差の絶対値</guimenuitem> モードは下側のレイヤーの画素の
          値と上側のレイヤーの同じ位置の画素の値の差の絶対値をとります。 元の
          両レイヤーにどんな画像を使っても、 結果として得られる画像は風変りに
          なります。 画像を部分的に反転させる目的に向いています。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Difference</quote>
          </title>
          <title lang="ja">
            レイヤーモード<quote>差の絶対値</quote>の等式
          </title>
          <alt role="latex">$$E = |I - M|$$</alt>
          <graphic fileref="images/math/layer-mode-difference.png"/>
        </equation>
        <para lang="en">
          The mode is commutative; the order of the two layers doesn't matter.
        </para>
        <para lang="ja">
          このモードは可換です。 両レイヤーの順序を問いません。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Addition</term>
      <term lang="ja">加算</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Addition</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Addition</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="カサン">加算</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="カサン">加算</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Addition</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>加算</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-addition-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-addition-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Addition</guilabel>
          mode is very simple. The pixel values of the upper and lower layers
          are added to each other. The resulting image is usually lighter. The
          equation can result in color values greater than 255, so some of the
          light colors may be set to the maximum value of 255.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>加算</guimenuitem> モードは非常に簡素です。 上下の両
          レイヤーの画素の値の和をとります。 その結果、 ほとんどの画像は色が
          薄くなります。 等式から導かれる色の値は255を越えることもあるため、
          薄い色は最大値255に定められているかもしれません。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Addition</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>加算</quote>の等式</title>
          <alt role="latex">$$E = min( (M + I), 255)$$</alt>
          <graphic fileref="images/math/layer-mode-addition.png"/>
        </equation>
        <para lang="en">
          The mode is commutative; the order of the two layers doesn't matter.
        </para>
        <para lang="ja">
          このモードは可換です。 両レイヤーの順序を問いません。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Subtract</term>
      <term lang="ja">減算</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Subtract</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Subtract</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ゲンサン">減算</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ゲンサン">減算</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Subtract</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>減算</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-subtract-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-subtract-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Subtract</guilabel>
          mode subtracts the pixel values of the upper layer from the pixel
          values of the lower layer. The resulting image is normally darker.
          You might get a lot of black or near-black in the resulting image.
          The equation can result in negative color values, so some of the
          dark colors may be set to the minimum value of 0.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>減算</guimenuitem> モードは下側のレイヤーの画素の値から
          上側のレイヤーの同じ位置の画素の値を引きます。 その結果、 画像は
          通常暗くなります。 得られる画像は真っ黒か黒っぽいものになりがちです。
          等式から導かれる値が負の色の値となることがあり、 暗い色は最低値の0に
          されているのかもしれません。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Subtraction</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>減算</quote>の等式</title>
          <alt role="latex">$$E = max( (I - M),0)$$</alt>
          <graphic fileref="images/math/layer-mode-subtract.png"/>
        </equation>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Darken only</term>
      <term lang="ja">比較(暗)</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Darken only</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Darken only</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ヒカクアン">比較(暗)</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ヒカクアン">比較(暗)</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Darken only</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>比較(暗)</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-darken-only-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-darken-only-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guimenuitem>Darken only</guimenuitem>
          mode compares each component of each pixel in the upper layer with
          the corresponding one in the lower layer and uses the smaller value
          in the resulting image. Completely white layers have no effect on
          the final image and completely black layers result in a black image.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>比較(暗)</guimenuitem> モードは上下両レイヤーの画素の値
          から小さな方を選んで結果の画像に使います。 一方が真っ白なレイヤーだと
          何の変化も起きず、 真っ黒なレイヤーがあると結果の画像も真っ黒に
          なります。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Darken only</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>比較(暗)</quote>の等式</title>
          <alt role="latex">$$E = min(M,I)$$</alt>
          <graphic fileref="images/math/layer-mode-darken.png"/>
        </equation>
        <para lang="en">
          The mode is commutative; the order of the two layers doesn't matter.
        </para>
        <para lang="ja">
          このモードは可換です。 両レイヤーの順序を問いません。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Lighten only</term>
      <term lang="ja">比較(明)</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Lighten only</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Lighten only</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="ヒカクメイ">比較(明)</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="ヒカクメイ">比較(明)</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Lighten only</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>比較(明)</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-lighten-only-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-lighten-only-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guimenuitem>Lighten only</guimenuitem>
          mode compares each component of each pixel in the upper layer with
          the corresponding one in the lower layer and uses the larger value
          in the resulting image. Completely black layers have no effect on
          the final image and completely white layers result in a white image.
        </para>
        <para lang="en">The equation is:</para>
        <para lang="ja">
          <guimenuitem>比較(明)</guimenuitem> モードは上下両レイヤーの画素の
          値を比較して大きな値を結果の画像に使います。 真っ黒なレイヤーが
          あると何の変化も起きず、 真っ白なレイヤーがあると白い画像になります。
        </para>
        <para lang="ja">等式はつぎのとおり:</para>
        <equation>
          <title lang="en">
            Equation for layer mode <quote>Lighten only</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>比較(明)</quote>の等式</title>
          <alt role="latex">$$E = max(M,I)$$</alt>
          <graphic fileref="images/math/layer-mode-lighten.png"/>
        </equation>
        <para lang="en">
          The mode is commutative; the order of the two layers doesn't matter.
        </para>
        <para lang="ja">
          このモードは可換です。 両レイヤーの順序を問いません。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Hue</term>
      <term lang="ja">色相</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Hue</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Hue</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="シキソウ">色相</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="シキソウ">色相</primary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Hue</quote></title>
          <title lang="ja">レイヤーモード<quote>色相</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-hue-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-hue-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Hue</guilabel>
          mode uses the hue of the upper layer and the saturation and value of
          the lower layer to form the resulting image. However, if the
          saturation of the upper layer is zero, the hue is taken from the
          lower layer, too.
        </para>
        <para lang="ja">
          <guimenuitem>色相</guimenuitem> モードは上側のレイヤーの色相と下側の
          レイヤーの彩度と明度を用いて結果の画像を構成します。 ただし上側の
          レイヤーの彩度が0のとき、 下側のレイヤーから色相も使います。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Saturation</term>
      <term lang="ja">彩度</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Saturation</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Saturation</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="サイド">彩度</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="サイド">彩度</primary>
        </indexterm>
        <figure>
          <title lang="en">
            Example for layer mode <quote>Saturation</quote>
          </title>
          <title lang="ja">レイヤーモード<quote>彩度</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-saturation-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-saturation-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Saturation</guilabel>
          mode uses the saturation of the upper layer and the hue and value of
          the lower layer to form the resulting image.
        </para>
        <para lang="ja">
          <guimenuitem>彩度</guimenuitem> モードは上側のレイヤーの彩度と、
          下側のレイヤーの色相と明度を用いて結果の画像を構成します。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Color</term>
      <term lang="ja">色</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Color</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Color</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="イロ">色</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="イロ">色</primary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Color</quote></title>
          <title lang="ja">レイヤーモード<quote>色</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-color-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク1を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-color-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Color</guilabel>
          mode uses the hue and saturation of the upper layer and the value of
          the lower layer to form the resulting image.
        </para>
        <para lang="ja">
          <guimenuitem>色</guimenuitem> モードは上側のレイヤーの色相と、 下側の
          レイヤーの明度を用いて結果の画像を構成します。
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term lang="en">Value</term>
      <term lang="ja">明度</term>
      <listitem>
        <indexterm lang="en">
          <primary>Layer Modes</primary>
          <secondary>Value</secondary>
        </indexterm>
        <indexterm lang="en">
          <primary>Value</primary>
        </indexterm>
        <indexterm lang="ja">
          <primary>レイヤーモード</primary>
          <secondary sortas="メイド">明度</secondary>
        </indexterm>
        <indexterm lang="ja">
          <primary sortas="メイド">明度</primary>
        </indexterm>
        <figure>
          <title lang="en">Example for layer mode <quote>Value</quote></title>
          <title lang="ja">レイヤーモード<quote>明度</quote>の例</title>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-value-mask1.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 1 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
          <mediaobject>
            <imageobject>
              <imagedata format="JPG"
                fileref="images/using/layer-mode-value-mask2.jpg"/>
            </imageobject>
            <caption>
              <para lang="en">
                Mask 2 is used as upper layer with 100% opacity.
              </para>
              <para lang="ja">
                マスク2を100%不透明な上側のレイヤーとして使う。
              </para>
            </caption>
          </mediaobject>
        </figure>
        <para lang="en"><guilabel>Value</guilabel>
          mode uses the value of the upper layer and the saturation and hue of
          the lower layer to form the resulting image. You can use this mode
          to reveal details in dark and light areas of an image without
          changing the saturation.
        </para>
        <para lang="ja">
          <guimenuitem>明度</guimenuitem> モードは上側のレイヤーの明度と下側の
          レイヤーの彩度を用いて結果の画像を構成します。 このモードを使うと
          彩度を変更せずに画像の暗い部分や眩しい部分を詳らかにできます。
        </para>
      </listitem>
    </varlistentry>
  </variablelist>
  <para lang="en">
    Each layer in an image can have a different layer mode. (Of course, the
    layer mode of the bottom layer of an image has no effect.) The effects of
    these layer modes are cumulative. The image shown below has three layers.
    The top layer consists of Wilber surrounded by transparency and has a
    layer mode of <quote>Difference</quote>.
    The second layer is solid light blue and has a layer mode of
    <quote>Addition</quote>. The bottom layer is filled with the
    <quote>Red Cubes</quote> pattern.
  </para>
  <para lang="ja">
    画像のレイヤーごとに別個のレイヤーモードも選べます。 (もちろん最背面の
    レイヤーのモードはどれを選んでも画像には何の変化ももたらしません。)
    それぞれのレイヤーモードの効果は掛け合わされます。 次の画像は3層のレイヤー
    から成ります。 最前面 (上側) のレイヤーは透明な部分で囲まれたウィルバー君が
    描かれ、 そのレイヤーモードは<quote>差の絶対値</quote>にしてあります。
    第2のレイヤーは単色青で<quote>加算</quote>モードです。 背景レイヤーは
    <quote>Red Cubes</quote>パターンで埋め尽くされています。
  </para>
  <figure>
    <title lang="en">Multi layer example</title>
    <title lang="ja">複数レイヤー複数モードの例</title>
    <mediaobject>
      <imageobject>
        <imagedata format="PNG"
          fileref="images/glossary/modes-multilayer.png"/>
      </imageobject>
    </mediaobject>
  </figure>
  <para lang="en">
    <acronym>GIMP</acronym> also has similar modes which are used for the
    painting tools. These are the same twenty-one modes as the layer modes,
    plus an additional two modes which are specific to the painting tools. You
    can set these modes from the <guilabel>Mode</guilabel> menu in the Tools
    option dialog. In the equations shown above, the layer you are painting on
    is the <quote>lower layer</quote> and the pixels painted by the tool are
    the <quote>upper layer</quote>. Naturally, you do not need more than one
    layer in the image to use these modes, since they only operate on the
    current layer and the selected painting tool.
  </para>
  <para lang="en">
    See <link linkend="gimp-paint-mode-examples"/> for a description of the
    two additional painting modes.
  </para>
  <para lang="ja">
    <acronym>GIMP</acronym>の描画ツールにも同じようなモードがあります。
    これらはレイヤーモードの21種類と同じものと、 2つの描画ツール特有のモード
    からなります。 描画ツールではこれらのモードをツールオプションダイアログ上の
    <guilabel>モード</guilabel> メニューで設定できます。 上述の等式については、
    描画対象のレイヤーが<quote>下側のレイヤー I</quote>で、 そのツールで
    描かれる画素は<quote>上側のレイヤー M</quote>にあります。 これらのモードを
    使用するのに画像にはレイヤーがひとつあれば充分です。 任意の描画ツールで
    現在使用中のレイヤーに操作をするのですから当然ですね。
  </para>
  <para lang="ja">
    別の2つの描画モードについては
    <link linkend="gimp-paint-mode-examples"/> をご覧ください。
  </para>
</sect1>
